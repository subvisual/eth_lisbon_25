"use client";

import type React from "react";
import { useState, useEffect } from "react";
import Link from "next/link";
import Image from "next/image";
import { Layout, Menu, theme as antdTheme } from "antd";
import { ConnectButton } from "@rainbow-me/rainbowkit";

import { useDarkMode } from "@/lib/useDarkMode";

const { Header } = Layout;

const Logo = () => {
  return (
    <svg
      width={100}
      height={35}
      version="1.0"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 300.000000 122.000000"
      preserveAspectRatio="xMidYMid meet"
    >
      <metadata>
        Created by potrace 1.10, written by Peter Selinger 2001-2011
      </metadata>
      <g
        transform="translate(0.000000,122.000000) scale(0.100000,-0.100000)"
        fill="#000000"
        stroke="none"
      >
        <path
          d="M982 1017 c-19 -20 -22 -35 -22 -108 0 -76 2 -88 23 -107 20 -19 35
-22 99 -22 101 0 108 8 108 127 0 81 -2 92 -23 111 -19 18 -35 22 -93 22 -61
0 -74 -3 -92 -23z m27 -43 c-10 -23 -13 -25 -16 -11 -3 10 1 25 8 33 17 21 21
11 8 -22z m149 -63 l-1 -76 -6 75 c-3 41 -10 82 -15 90 -9 13 -8 13 7 1 14
-11 17 -29 15 -90z m-35 -2 l-2 -72 -45 -1 -46 -1 0 73 0 72 48 0 47 0 -2 -71z
m-114 -21 c1 -29 7 -58 13 -65 8 -10 6 -13 -6 -13 -9 0 -16 6 -17 13 -7 78 -5
117 5 117 1 0 3 -23 5 -52z m146 -68 c-3 -5 -11 -10 -16 -10 -6 0 -7 5 -4 10
3 6 11 10 16 10 6 0 7 -4 4 -10z"
        />
        <path
          d="M1240 910 l0 -130 35 0 35 0 0 50 c0 45 2 50 23 50 16 0 29 -13 50
-50 25 -45 32 -50 63 -50 43 0 43 12 0 76 l-34 50 34 54 c43 68 43 80 1 80
-29 0 -36 -6 -61 -49 -19 -32 -38 -51 -53 -54 -22 -4 -23 -1 -23 49 l0 54 -35
0 -35 0 0 -130z m56 14 c11 -16 12 -24 4 -29 -6 -4 -15 -17 -20 -29 -6 -14 -8
5 -8 59 1 44 3 67 5 51 3 -16 11 -39 19 -52z m113 26 l-23 -43 22 -38 c35 -60
25 -66 -13 -9 -35 52 -35 53 -17 74 11 12 25 32 32 44 6 13 14 22 16 19 3 -3
-5 -24 -17 -47z"
        />
        <path
          d="M1650 927 c0 -144 2 -147 121 -147 l85 0 -2 28 c-1 27 -2 27 -70 28
l-69 1 0 102 0 101 -32 0 -33 0 0 -113z m37 41 c-3 -8 -6 -5 -6 6 -1 11 2 17
5 13 3 -3 4 -12 1 -19z m0 -80 c-3 -7 -5 -2 -5 12 0 14 2 19 5 13 2 -7 2 -19
0 -25z m18 -76 c-8 -8 -25 10 -25 26 0 13 2 13 14 -4 8 -10 13 -21 11 -22z"
        />
        <path
          d="M1890 932 c0 -100 2 -110 23 -130 20 -19 35 -22 110 -22 l87 0 0 31
0 31 -75 -4 c-72 -3 -75 -2 -75 20 0 21 4 22 65 22 l65 0 0 31 0 31 -65 -4
c-62 -3 -65 -2 -65 20 0 21 4 22 75 22 l75 0 0 30 0 30 -110 0 -110 0 0 -108z
m57 60 c-10 -10 -17 -25 -17 -32 0 -7 7 -22 17 -32 15 -17 15 -19 0 -36 -21
-23 -21 -41 -1 -63 14 -16 14 -17 -3 -15 -16 3 -18 15 -21 99 -3 94 -2 97 19
97 21 0 21 -1 6 -18z"
        />
        <path
          d="M2143 1010 c0 -28 3 -30 39 -30 l38 0 0 -100 0 -100 35 0 35 0 0 100
0 100 35 0 c32 0 35 2 35 30 l0 30 -108 0 -109 0 0 -30z m137 -8 c0 -4 -4 -12
-10 -18 -5 -5 -11 -47 -13 -94 l-3 -85 -2 87 c-1 48 -6 90 -12 93 -18 11 -10
25 15 25 14 0 25 -4 25 -8z"
        />
        <path
          d="M2380 1010 c0 -20 5 -30 15 -30 9 0 12 -6 8 -16 -4 -12 -1 -15 13
-12 14 2 20 13 22 46 3 41 2 42 -27 42 -28 0 -31 -3 -31 -30z"
        />
        <path
          d="M2495 1020 c-11 -12 -18 -35 -18 -60 0 -62 23 -80 100 -80 59 0 63
-2 63 -23 0 -20 -4 -22 -47 -19 -27 2 -52 8 -57 13 -6 5 -23 9 -38 9 -35 0
-38 -27 -5 -58 20 -19 35 -22 98 -22 66 0 78 3 97 23 30 32 29 87 -1 115 -19
18 -35 22 -85 22 -55 0 -62 2 -62 20 0 17 7 20 49 20 28 0 53 -4 56 -10 3 -5
19 -10 36 -10 36 0 39 27 6 58 -20 19 -35 22 -99 22 -62 0 -78 -3 -93 -20z
m37 -22 c-7 -7 -12 -20 -12 -30 0 -10 -4 -18 -10 -18 -5 0 -10 8 -10 18 0 20
18 42 34 42 6 0 5 -5 -2 -12z m4 -85 c-7 -7 -26 7 -26 19 0 6 6 6 15 -2 9 -7
13 -15 11 -17z m134 -24 c0 -6 -4 -7 -10 -4 -5 3 -10 11 -10 16 0 6 5 7 10 4
6 -3 10 -11 10 -16z m3 -59 c-5 -19 -23 -29 -23 -12 0 7 20 32 26 32 1 0 0 -9
-3 -20z"
        />
        <path
          d="M160 625 l0 -335 335 0 335 0 0 335 0 335 -335 0 -335 0 0 -335z
m647 8 c1 -220 -2 -305 -10 -310 -7 -5 -148 -8 -314 -9 l-303 0 -1 120 c0 67
-2 202 -3 301 -1 99 0 186 2 193 3 10 72 12 316 10 l311 -3 2 -302z"
        />
        <path
          d="M1510 468 l0 -248 66 0 66 0 -4 140 c-2 76 0 136 3 132 3 -4 47 -67
98 -139 l92 -133 57 0 57 0 0 245 0 245 -65 0 -65 0 3 -137 c2 -76 1 -135 -2
-132 -3 3 -46 64 -96 135 l-90 129 -60 5 -60 5 0 -247z m105 210 c1 -2 22 -32
48 -68 26 -36 57 -80 69 -99 13 -19 36 -47 51 -64 26 -27 30 -28 44 -14 12 12
16 41 17 129 l1 113 32 3 c29 3 31 1 34 -35 2 -21 4 -117 4 -213 l0 -175 -36
-3 c-35 -3 -36 -1 -128 128 -90 128 -120 153 -135 114 -3 -9 -6 -67 -6 -130
l0 -114 -35 0 -35 0 -1 103 c-1 178 2 321 6 328 4 6 66 3 70 -3z"
        />
        <path
          d="M2580 543 l0 -173 65 0 65 0 0 169 0 169 -65 4 -65 3 0 -172z m99 -3
l1 -140 -35 0 c-41 0 -44 9 -41 105 2 39 4 94 4 123 l2 52 35 0 34 0 0 -140z"
        />
        <path
          d="M997 672 l-37 -38 0 -170 0 -170 38 -37 38 -37 150 0 150 0 37 38 37
38 0 112 0 112 -120 0 -120 0 0 -55 0 -55 55 0 55 0 0 -40 0 -40 -95 0 -95 0
0 140 0 140 93 0 c80 0 97 -3 111 -19 12 -13 34 -20 67 -23 l49 -3 0 35 c0 28
-8 44 -38 73 l-38 37 -150 0 -150 0 -37 -38z m359 -16 c33 -32 28 -62 -9 -59
-15 1 -34 9 -43 17 -16 17 -39 20 -143 18 -41 -1 -70 -7 -79 -16 -10 -10 -15
-49 -16 -150 -3 -168 -5 -165 120 -169 104 -3 124 8 124 72 0 51 -21 71 -71
71 -38 0 -40 2 -37 28 3 27 4 27 73 27 105 0 105 0 105 -102 0 -81 -2 -89 -27
-115 l-27 -28 -141 0 c-139 0 -142 1 -165 25 -23 25 -24 32 -26 188 -2 154 -1
163 19 186 33 35 51 39 190 35 122 -2 130 -4 153 -28z"
        />
        <path
          d="M2077 672 l-37 -38 0 -170 0 -170 38 -37 38 -37 145 0 145 0 37 38
37 38 0 170 0 170 -38 37 -38 37 -145 0 -145 0 -37 -38z m349 -16 c23 -26 24
-33 24 -189 l0 -161 -27 -28 -27 -28 -137 0 -137 0 -26 31 c-25 30 -26 31 -23
190 l2 161 30 27 c30 27 33 27 164 26 133 -1 134 -1 157 -29z"
        />
        <path
          d="M2167 620 c-16 -13 -18 -32 -20 -151 -1 -102 2 -140 12 -153 20 -24
188 -23 207 2 19 25 20 285 0 301 -22 18 -176 19 -199 1z m183 -150 l0 -140
-90 0 -90 0 0 140 0 140 90 0 90 0 0 -140z"
        />
        <path
          d="M2580 275 l0 -55 65 0 65 0 0 55 0 55 -65 0 -65 0 0 -55z m90 6 c15
-29 13 -31 -25 -31 -31 0 -35 3 -35 25 0 20 5 25 25 25 14 0 29 -8 35 -19z"
        />
      </g>
    </svg>
  );
};

export default function AppHeader() {
  const [mounted, setMounted] = useState(false);
  useEffect(() => {
    setMounted(true);
  }, []);

  const { isDarkMode } = useDarkMode();
  const themeMode = mounted && isDarkMode ? "dark" : "light";

  const { token } = antdTheme.useToken();

  const navLinkStyle: React.CSSProperties = { color: token.colorPrimary };

  const menuItems = [
    {
      label: (
        <Link href="/" style={navLinkStyle}>
          AI Assistant
        </Link>
      ),
      key: "home",
    },
    {
      label: (
        <Link href="/aave" style={navLinkStyle}>
          Aave
        </Link>
      ),
      key: "aave",
    },
    {
      label: (
        <Link href="/bridging" style={navLinkStyle}>
          Bridging
        </Link>
      ),
      key: "bridging",
    },
  ];

  return (
    <Header
      style={{
        display: "flex",
        alignItems: "center",
        gap: 24,
        paddingInline: 24,
        background: themeMode === "dark" ? token.colorBgElevated : "#ffffff",
      }}
    >
      {/* Logo */}
      <button
        onClick={() => {
          const audio = new Audio("/meme-okay-lets-go.mp3");
          audio.play();
          setTimeout(() => {
            audio.pause();
            audio.currentTime = 0;
          }, 3000);
        }}
        style={{
          display: "flex",
          alignItems: "center",
          marginRight: "auto",
          background: "none",
          border: "none",
          cursor: "pointer",
          padding: 0,
        }}
      >
        <Logo />
      </button>

      {/* Navigation */}
      <Menu
        theme={themeMode}
        mode="horizontal"
        items={menuItems}
        selectable={false}
        style={{
          flex: 1,
          justifyContent: "center",
          minWidth: 0,
          background: "transparent",
        }}
      />

      {/* Wallet connect */}
      <ConnectButton />
    </Header>
  );
}
